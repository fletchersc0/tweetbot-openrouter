<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hourly Tweet‑Engine</title>
<style>
 body {font-family:system-ui, sans-serif; background:#111; color:#f0f0f0; display:flex;
       flex-direction:column; align-items:center; justify-content:center; min-height:100vh;}
 h1 {margin:0 0 1rem; font-size:2rem;}
 .box {padding:1rem 2rem; border:1px solid #444; border-radius:8px; max-width:680px;}
 .label {color:#aaa; font-size:.9rem;}
</style>
</head>
<body>
  <h1>Hourly Tweet‑Engine</h1>
  <div class="box">
    <p class="label">Current index:</p><p id="idx">‑</p>
    <p class="label">Tweet:</p><p id="tweet">‑</p>
    <p class="label">LLM reply:</p><p id="reply">‑</p>
    <p id="countdown">‑</p>
  </div>

<script>
async function refresh() {
  const res = await fetch("/api/current");
  const data = await res.json();
  document.getElementById("idx").textContent   = data.index;
  document.getElementById("tweet").textContent = data.prompt;
  document.getElementById("reply").textContent = data.reply;

  let secs = data.seconds_until_next;
  function tick(){
      const m = Math.floor(secs/60).toString().padStart(2,"0");
      const s = (secs%60).toString().padStart(2,"0");
      document.getElementById("countdown").textContent =
         `Next tweet in ${m}:${s}`;
      if(secs-->0) setTimeout(tick,1000);
      else refresh();
  }
  tick();
}
refresh();
</script>
</body>
</html>
