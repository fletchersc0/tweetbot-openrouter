<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>every idea ever /hr</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: #d6c7aa; /* Matching original tool background */
      font-family: "Courier New", Consolas, monospace;
      white-space: pre;
      overflow-x: auto;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas:
        "header header"
        "left right";
      height: 100vh;
      gap: 0;
    }

    .header {
      grid-area: header;
      border: 1px solid black;
    }

    .left {
      grid-area: left;
      overflow: auto;
      border: 1px solid black;
      font-size: 0.6rem;
    }

    .right {
      display: grid;
      grid-template-rows: 1fr 1fr;
      height: 100%;
    }

    .top-right {
      overflow: auto;
      border: 1px solid black;
      white-space: pre-wrap; /* To handle idea text wrapping */
      font-family: "Courier New", Consolas, "Lucida Console", monospace; /* Matching ASCII font */
      font-size: 0.8rem; /* Adjust font size to match ASCII art */
    }

    .bottom-right {
      overflow: auto;
      border: 1px solid black;
      font-size: 0.75rem;
      position: relative; /* To position the barcode */
    }

    .box {
      padding: 1rem;
    }

    /* Display elements styling */
    #idea-container {
      margin-top: 1rem;
    }
    
    #idx, #tweet, #reply, #countdown {
      white-space: pre-wrap;
      word-break: break-word;
      display: block;
      margin-bottom: 0.5rem;
    }

    /* Optional: remove scrollbar styling, leave if debugging */
    ::-webkit-scrollbar {
      display: none;
    }
    html {
      scrollbar-width: none;
    }
    
    /* ASCII idea line styling */
    #ascii-idea-line {
      white-space: pre;
      overflow: hidden;
    }

    /* ASCII Barcode styling */
    .ascii-barcode-container {
      position: absolute;
      top: 10px;
      left: 10px;
      font-family: monospace;
      font-size: 0.4rem;
      line-height: 0.8;
      white-space: pre;
      border: 1px solid black;
      padding: 4px;
    }
    
    .ascii-barcode {
      display: block;
      margin-bottom: 2px;
    }
    
    .ascii-barcode-label {
      text-align: center;
      font-size: 0.4rem;
      margin-top: 2px;
    }
  </style>
</head>
<body>
  <div class="grid">
    <div class="header box">
                                                __                     
                                         __    /\ \                    
   __   __  __     __   _ __   __  __   /\_\   \_\ \     __     __         __   __  __     __   _ __      choose what u seek, or it is chosen for u. but prefer to choose what is chosen for u .
 /'__`\/\ \/\ \  /'__`\/\`'__\/\ \/\ \  \/\ \  /'_` \  /'__`\ /'__`\     /'__`\/\ \/\ \  /'__`\/\`'__\     
/\  __/\ \ \_/ |/\  __/\ \ \/ \ \ \_\ \  \ \ \/\ \L\ \/\  __//\ \L\.\_  /\  __/\ \ \_/ |/\  __/\ \ \/    +u r a creator  +u r a wanderer  +u r a burner  + u r a archivist  +u r a witness
\ \____\\ \___/ \ \____\\ \_\  \/`____ \  \ \_\ \___,_\ \____\ \__/.\_\ \ \____\\ \___/ \ \____\\ \_\    +u r a creator  +u r a wanderer  +u r a burner  + u r a archivist  +u r a witness
 \/____/ \/__/   \/____/ \/_/   `/___/> \  \/_/\/__,_ /\/____/\/__/\/_/  \/____/ \/__/   \/____/ \/_/    +u r a creator  +u r a wanderer  +u r a burner  + u r a archivist  +u r a witness
                                   /\___/                              
                                   \/__/                                                              
    </div>

    <div class="left box">                                                                                                                                                                          
                                ▏▌▊▉▂▂▂▉▊▋▏                                             
                             ▎▉▃▄▉▍▌▋▄▂▄███▅▉▎                                           
                          ▌▅▄▉▏  ▏▋▌▍▊▉▁▆██▇▋                                         
                        ▏▊▄▂▋▍▎▏▋▃▆██▄▄▄▆█▇▇█▁▎                                        
                      ▍▅▄▋▏▏▍▆▇▆▇███▇▇▇█▇▊▂██                                     
                      ▌▇▁▍ ▎▁▉▁▂▁▊▁▉▂▂▃▃█▇▆███▁▏                                      
                        ▏▊▄▁▎ ▊▆█████▇███████████▃▏                                      
                      ▏▍▄▊▎▏▉▉▁▅▄▉▃▊█▆██▇█████▏                                      
                       ▎▇▃▌▌▌▆▇▇▁ ▏▎█▋▄████▆██▇▋     .-.     .-.     .-.     .-.     .-.     .-.     .-.     .-.     .-.     .-.                                    
                      ▏▎▊█▃▊▋▊▆██▋ ▏ ▋▅█████████▁▍my   \ idea  \  is   \  ...  \       \       \       \       \<span id="ascii-idea"></span>                                     
                       ▍▁▄██▃▂▁██▂ ▏▃▄▆▅██████████▃▍'     `-'     `-'     `-'     `-'     `-'     `-'     `-'     `-'     `-'     `                                  
                   ▏▏▏▎▍▎▉▆█▅███▂▊▏▎▋▉▃███████████▄                                  
                  ▎ ▎▍▍▏▌▏▋▅████▅▇▆▆▆▇██████████████▇                                
                  ▏▎▎▎▏▏▎▏▋▏▎▂████▇████████████████████▅                               
                 ▏▏▏▏ ▏▍▍▏▏▉▍▏▊▇█████████████████▃▄▇▅▇██▅▏                              
                ▍▋▍▏    ▏▍▍▏▍▎▎▋▅███████████████▅▁▂▉▄▆▆██▁                              
                ▊▏▍▋▊▉▋▎  ▏▍▎▌▋▌▏▉▇██████████▆▁▍ ▏▁▅▇▄▉███▎                             
               ▏▏▎▎▎▎▎▋▂▅▁▉▌▏▏▍▊▂▃▂▁▃▄▃███▅▉▍ ▎▉▄██▂▊▃▁▇█                             
              ▏▊▍▍▌▏▏▍▊▍▋▄▊▋▉▊▂▊▍▏▏▍▌▋▂▃▉▍ ▏▊▄▇▆▆▇▆▂▋▉                          
              ▌▌▎ ▏▊▄▂▊▍▏▎▋▋▎▎▋▅▁▂▊▉▍▎▏ ▏▊▂▄▂▁▃▊▊▎ ▎▁▃▄▄▃                          
            ▏▍▊▏▎▍▌▍▉████▅▂▊▎ ▏▌▊▉▋▎ ▏▋▊▉▍▍▍▌▎ ▎▋▂▆██▇▍▋▌                      
            ▏▋▏▍▍▍▍▋▇█████▇▋▉▃▉▎▏ ▎▊▉▁▋▍▎▏▏▍▊▂▆███████▂ ▎▋                       
          ▏▉▌▍▍▍▍▍████████▆▄▂▌▍▁▆█▅▃▋▉▊▉▃▇█▆▆████████▅▁▌▏▁▇█▅▎                        
          ▍▃▎▍▌▋▁▇█████▇▆▄▅▄▃▁▂▋▋▌▎▎▏▋ ▏▋ ▊▋▊▁▇███████▃▊▌▌▉▅█                        
        ▎▄▋▋▋▉▊▂▉▌▋▌▎▎ ▍ ▍▏▎▌▏ ▌▎ ▋▌▋▌▊▌▌▊▎▉▂▄███▆▅▅▄▄▂▉▋▋                   
      ▏▉▄▍▋▋▏▊▏▍ ▌ ▎▏▏▍ ▊▋▊▂▂▃▆█▆███████▃▆▇▆████▊▍ ▍▎▍▏▎▍                    
      ▏▃▋▂▎▎▋▁▊▂▋▁▉▃▁▂▆▇▇██████▇▇▅▅▄▆████████████▄▂▉▃▂▄▄▆▇█                     
        ▉███▄▅███▅▂▁▂▆███████▆▋▍▍▎▋▏▌▊▎▄▅█████████▄▁▁▃▇██████▄▏                     
        ▏▉█████▄▎   ▎▌▃████▇▃▃▆▂▌▃▅▅▇█▇█████████▂▏   ▏▌█████▃▏                       
          ▏▋▎▁▍▂▊▏ ▏▋▎ ▎▅█████▅█████████████████▋▎▍▏  ▎▊██▁▉                        
            ▏ ▍▎█▄▋▌▌▏▍▌▌▍██████████████████████▆▋▏ ▎▍▌▁▇██▆▏ ▏                        
                 ▉███▆▊▌▏▏▋▅██████████████████████▂▏▋▍▏▋▆█████▌                          
                 ▍███▅▋▍▁▂▁▊▅████████████████████▇▊▊▏▋▄▅██████                          
                 ▎▆█████▁▌▌▊▄▇███████████████████▃▍▎▉▁▇██████▆                          
                 ▏▃█████▆▆▉▁▅▇███████████████████▊▍▌▍▃▅▇████                          
                   ▊████▇▆▂▌▄█▇███████████████████▂▌▎▁▅▆█████▅                          
                   ▋█▇█████▇▆▅▄███████████████████▇▄▆███████▇▁▍                         
                   ▏▅▌███████▆██████████████████████████████▋▁▍█                          
                   ▍▁▎▋████████████████████████████████████▉ ▋▌█                          
                   ▏▌▍ ▊██████████████████████████████████▂  ▏▊█▎                         
                    ▏▋  ▋█████████▄▃▇██████████▇▇████████▁▏   ▋▁▌                         
                    ▎▌   ▋▇██████▌▂▅▅███████▄▅▅█████████▊▎    ▍▉▁                         
                   ▎▌▌   ▏▍▄████▇▆███████████▆█████████▊▏   ▏▌▅▅▅▊▋▌▍▎▎▏                  
    ▏▎▎▎▎▎▎▎▌▍▌▍     ▌▉▁▃▄▄▄▇███▅▄▃▃▅████▄▄▃▂▁▋▏ ▎▌▊▉▁▁▉▋▌▍▍▍▍▍▍▎▏                 
                                      ▏▎▏▏      ▏▎▏                                       
    </div>

    <div class="right">
      <div class="top-right box">
        <div id="idea-container">
          <span>> Current index:</span>
          <span id="idx">‑</span>
          <span>> Idea String:</span>
          <span id="tweet">‑</span>
          <span>> Idea:</span>
          <span id="reply">‑</span>
          <span id="countdown">‑</span>
        </div>
      </div>
      <div class="bottom-right box" style="font-size: 0.4rem;">                                                                                                                                                                                                                                                                          
        <!-- ASCII barcode will be placed here -->
        <div class="ascii-barcode-container">
          <div id="ascii-barcode" class="ascii-barcode"></div>
          <div class="ascii-barcode-label">Scan for Idea</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Simple function to create an ASCII art barcode representation
    function generateASCIIBarcode(text) {
      if (!text) return ""; 
      
      // Convert text to a patterned string
      let barcodeHeight = 8; // Height of the barcode in text lines
      let result = "";
      
      // Create a simple pattern based on the character codes
      let pattern = "";
      for (let i = 0; i < text.length; i++) {
        let charCode = text.charCodeAt(i);
        // Convert the character code to a binary-like pattern
        let binPattern = (charCode % 2 === 0) ? "█ " : " █";
        let binPattern2 = (charCode % 3 === 0) ? "██ " : " ██";
        let binPattern3 = (charCode % 5 === 0) ? "█  " : "  █";
        
        // Add some variation based on the character
        pattern += binPattern + binPattern2 + binPattern3;
      }
      
      // Add start and end markers for the barcode
      pattern = "█ █" + pattern + "█ █";
      
      // Generate the multi-line barcode
      for (let i = 0; i < barcodeHeight; i++) {
        result += pattern + "\n";
      }
      
      return result;
    }

    async function refresh() {
      const res = await fetch("/api/current");
      const data = await res.json();

      // Update the data in the top-right panel
      document.getElementById("idx").textContent = data.index;
      document.getElementById("tweet").textContent = data.prompt;
      document.getElementById("reply").textContent = data.reply;
      
      // Also update the ASCII art line to include the idea string
      document.getElementById("ascii-idea").textContent = data.prompt;
      
      // Generate and update the ASCII barcode
      document.getElementById("ascii-barcode").textContent = generateASCIIBarcode(data.prompt);

      let secs = data.seconds_until_next;

      function tick() {
        const m = String(Math.floor(secs / 60)).padStart(2, "0");
        const s = String(secs % 60).padStart(2, "0");

        document.getElementById("countdown").textContent =
            `Next idea in ${m}:${s}`;

        if (secs-- > 0) setTimeout(tick, 1000);
        else refresh();
      }
      tick();
    }
    
    // Start the process on page load
    refresh();
  </script>
</body>
</html>
